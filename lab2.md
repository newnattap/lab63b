# การทดลองที่ 2 เรื่อง การเขียนโปรแกรมค้นหาไวไฟ

## วัตถุประสงค์
เพื่อศึกษาการเขียนโปรแกรมลงบนไมโครคอนโทรเลอร์เพื่อค้นหาไวไฟ

## อุปกรณ์ที่ใช้

1. ไมโครคอนโทรเลอร์ ESP-01
2. สาย USB
3. USB to serial
4. คอมพิวเตอร์

## ศึกษาข้อมูลเบื้องต้น
[02 run example 2](https://youtu.be/yBjab0UNuB8)

## วิธีการทดลอง
1. ต่อไมโครคอนโทรลเลอร์กับซีเรียลพอร์ท
2. เปิด command prompt ไปที่ไดรฟ์ D โดยใช้คำสั่ง **D:**
3. เข้าโปรแกรมตัวอย่างโดยใช้คำสั่ง **cd pattani**
4. เลือกโปรแกรมคำสั่ง **cd 02_Scan-Wifi**
5. พิมพ์คำสั่ง vi src/main.cpp เพื่อดูโค้ดโปรแกรม
```
#include <Arduino.h>
#include <ESP8266WiFi.h>

int cnt = 0;

void setup()
{
 Serial.begin(115200);
 WiFi.mode(WIFI_STA);
 WiFi.disconnect();
 delay(100);
 Serial.println("\n\n\n");
}

void loop()
{
 Serial.println("========== เริ่มต้นแสกนหา Wifi ===========");
 int n = WiFi.scanNetworks();
 if(n == 0) {
  Serial.println("NO NETWORK FOUND");
 } else {
  for(int i=0; i<n; i++) {
   Serial.print(i + 1);
   Serial.print(": ");
   Serial.print(WiFi.SSID(i));
   Serial.print(" (");
   Serial.print(WiFi.RSSI(i));
   Serial.println(")");
   delay(10);
  }
 }
 Serial.println("\n\n");
}
```
7. ใช้คำสั่ง **pio run -t upload** เพื่ออัพโหลดโปรแกรมลงในไมโครคอนโทรนเลอร์
8. กดปุ่มสีดำบนไมโครคอนโทรเลอร์เพื่อให้ดาวโหลด และกดปุ่มรีเซ็ตสีแดงเพื่อรีเซ็ตคำสั่ง
9. ใช้คำสั่ง**pio device monitor** เพื่อดูผลลัพธ์

## การบันทึกผลการทดลอง
เมื่อทำการรันคำสั่งแล้ว ไมโครคอนโทรลเลอร์จะทำการแสกนค้นหาสัญญาณwifiและแสดงผลลัพธ์บนหน้าจอ

![image](https://user-images.githubusercontent.com/80879585/111974886-87ecc980-8b32-11eb-9816-9472f5eb2808.png)

## อธิบายผลการทดลอง
เมื่อทำการรันโปรแกรมลงบนไมโครคอนโทรลเลอร์โดยการอัพโหลดโปรแกรม 02_Scan-Wifi และทำการรันโปรแกรมโดยใช้คำสั่ง pio device monitor หน้าจอจะแสดงผลลัพธ์ของสัญญาณwifiที่สามารถตรวจจับได้

## คำถามหลังการทดลอง
ถาม ความแรงของสัญญาณwifiส่งผลต่อการตรวจจับสัญญาณของไมโครคอนโทรลเลอร์หรือไม่
 
ตอบ ความแรงของสัญญาณwifiมีผลต่อการตรวจจับสัญญาณของไมโครคอนโทรลเลอร์ โดยถ้าสัญญาณมีความแรงมากจะสามารถตรวจจับได้รวดเร็วมากขึ้น
